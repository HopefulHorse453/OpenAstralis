package cc.astralis.module.impl.exploit;

import cc.astralis.event.EventTarget;
import cc.astralis.event.events.impl.network.PacketEvent;
import cc.astralis.event.types.EventModes;
import cc.astralis.module.Category;
import cc.astralis.module.Module;
import cc.astralis.util.network.PacketUtil;
import net.minecraft.network.protocol.common.ClientboundResourcePackPushPacket;
import net.minecraft.network.protocol.common.ServerboundResourcePackPacket;

public class PackSpooferModule extends Module {

    public PackSpooferModule() {
        super(Category.EXPLOIT);
    }


    @EventTarget
    public void onPacket(PacketEvent event) {
        if (event.getEventMode() == EventModes.SEND) {
            return;
        }
        if (event.getPacket() instanceof ClientboundResourcePackPushPacket) {
            event.setCancelled(true);

            PacketUtil.sendNoEvent(new ServerboundResourcePackPacket(mc.player.getUUID(), ServerboundResourcePackPacket.Action.ACCEPTED));
            PacketUtil.sendNoEvent(new ServerboundResourcePackPacket(mc.player.getUUID(), ServerboundResourcePackPacket.Action.DOWNLOADED));
            PacketUtil.sendNoEvent(new ServerboundResourcePackPacket(mc.player.getUUID(), ServerboundResourcePackPacket.Action.SUCCESSFULLY_LOADED));
        }
    }

}
