package cc.astralis.module.impl.exploit.disablers;

import cc.astralis.Astralis;
import cc.astralis.event.EventTarget;
import cc.astralis.event.events.impl.game.UpdateEvent;
import cc.astralis.event.events.impl.network.PacketEvent;
import cc.astralis.module.Module;
import cc.astralis.module.SubModule;
import cc.astralis.module.impl.movement.ScaffoldWalkModule;
import net.minecraft.network.protocol.game.ServerboundPlayerCommandPacket;

public class VulcanScaffold extends SubModule {
    public VulcanScaffold(Module module) {
        super(module,"Vulcan Scaffold");
    }

    @EventTarget
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof ServerboundPlayerCommandPacket clientCommandC2SPacket &&
                (clientCommandC2SPacket.getAction() == ServerboundPlayerCommandPacket.Action.START_SPRINTING ||
                        clientCommandC2SPacket.getAction() == ServerboundPlayerCommandPacket.Action.STOP_SPRINTING)
        ) {
            event.setCancelled(true);
        }
    }

    @EventTarget
    public void onUpdate(UpdateEvent event) {
        if (!Astralis.getInstance().getModuleManager().getModule(ScaffoldWalkModule.class).isToggled()) {
            return;
        }

        //This is patched since pred check make a new one or actually sneak


        /*if (mc.player.age % 10 == 0) {
            PacketUtil.send(new ClientCommandC2SPacket(mc.player, ClientCommandC2SPacket.Mode.PRESS_SHIFT_KEY));
            PacketUtil.send(new ClientCommandC2SPacket(mc.player, ClientCommandC2SPacket.Mode.RELEASE_SHIFT_KEY));
        }*/
    }
}
